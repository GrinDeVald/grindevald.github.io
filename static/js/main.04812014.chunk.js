(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(64)},28:function(e,t,a){},30:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(20),i=a.n(r),o=(a(28),a(3)),c=a(4),l=a(6),d=a(5),u=a(7),m=(a(30),a(22)),h=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){this.props;return s.a.createElement("div",null)}}]),t}(n.Component),p=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).showModal=function(){a.setState({dishesModal:!a.state.dishesModal})},a.delUser=function(e){var t=e.target.dataset.id;a.props.delUser(t)},a.editUserModal=function(e){var t=e.target.dataset.name,n=e.target.dataset.id;a.props.editUserModal(t,n)},a.state={dishesModal:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.dishesModal,t=this.props,a=t.name,n=t.userId,r=t.dishes;return s.a.createElement("div",{className:"userContainer"},s.a.createElement("div",{className:"nameContainer"},s.a.createElement("h3",null,a),s.a.createElement("button",{onClick:this.delUser,"data-id":n,className:"delUserBtn"},"\u274c"),s.a.createElement("button",{onClick:this.editUserModal,"data-id":n,"data-name":a,className:"editUserBtn"},"\u270e")),s.a.createElement("button",{onClick:this.showModal},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043e\u0431\u0435\u0434"),e&&s.a.createElement(h,{dishes:r}))}}]),t}(n.Component),f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).changeName=function(e){a.setState({name:e.target.value})},a.addUser=function(){a.props.addUser(a.state.name)},a.editUser=function(e){var t=a.state.name,n=a.props.currentUser;t||(t=n),a.props.editUser(t)},a.state={name:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showModal,a=e.currentUser;return s.a.createElement("div",{className:"userModalContainer"},s.a.createElement("div",{className:"userModal"},s.a.createElement("h3",{className:"userModalTitle"},""!==a?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u043c\u044f":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),s.a.createElement("input",{type:"text",name:"username",className:"modalInput",onChange:this.changeName,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043c\u044f",defaultValue:a}),s.a.createElement("div",{className:"modalBtnsContainer"},""!==a?s.a.createElement("button",{className:"modalBtn",onClick:this.editUser},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"):s.a.createElement("button",{className:"modalBtn",onClick:this.addUser},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),s.a.createElement("button",{className:"modalBtn redBtn",onClick:t},"\u041e\u0442\u043c\u0435\u043d\u0430"))))}}]),t}(n.Component),b=a(12);b.initializeApp({apiKey:"AIzaSyC8fQi4N3lz_6l0EmJaDtz61ivrqcI_rbA",authDomain:"dinner-16b10.firebaseapp.com",databaseURL:"https://dinner-16b10.firebaseio.com",projectId:"dinner-16b10",storageBucket:"dinner-16b10.appspot.com",messagingSenderId:"97632152223"});var U=b.database(),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).getUserData=function(){U.ref("users").on("value",function(e){var t=[];e.forEach(function(e){t.push(Object(m.a)({id:e.key},e.val()))}),a.setState({users:t})})},a.showModal=function(){a.setState({modal:!a.state.modal})},a.resetState=function(){a.setState({currentUser:"",currentUserId:""})},a.addUser=function(e){U.ref("users").push({name:e,dinner:[],fav:[]}),a.getUserData(),a.showModal()},a.delUser=function(e){U.ref("users/".concat(e)).remove(),a.getUserData()},a.editUser=function(e){var t=a.state.currentUserId;U.ref("users/".concat(t)).update({name:e}),a.showModal(),a.resetState()},a.editUserModal=function(e,t){a.setState({currentUserId:t,currentUser:e,modal:!a.state.modal})},a.state={users:[],modal:!1,currentUserId:"",currentUser:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getUserData()}},{key:"componentWillUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.modal,r=t.currentUser,i=this.props.dishes;return s.a.createElement("div",{className:"usersContainer"},s.a.createElement("button",{className:"addUserBtn",onClick:this.showModal},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),s.a.createElement("h3",{className:"usersTitle"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"),s.a.createElement("div",{className:"usersWrapper"},a.map(function(t,a){return s.a.createElement(p,{key:a,userId:t.id,name:t.name,delUser:e.delUser,editUserModal:e.editUserModal,dishes:i})})),n&&s.a.createElement(f,{showModal:this.showModal,addUser:this.addUser,currentUser:r,editUser:this.editUser}))}}]),t}(n.Component),E=a(21),j=a.n(E),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={dishes:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.a.get("https://cors-anywhere.herokuapp.com/https://www.obedsmile.ru/menu/?date=14-11-2018").then(function(e){var t=document.createElement("html");t.innerHTML=e.data;for(var a=[],n=t.querySelectorAll(".name-dish"),s=0;s<n.length;s+=1){if(!n[s].classList.contains("col-md-7")){var r={name:n[s].firstChild.innerText,descr:n[s].nextElementSibling.firstElementChild.innerText};a.push(r)}}return a}).then(function(t){e.setState({dishes:t})})}},{key:"render",value:function(){var e=this.state.dishes;return console.log(e),s.a.createElement("div",{className:"App"},e.length?s.a.createElement(v,{dishes:e}):"PRELOADER")}}]),t}(n.Component);i.a.render(s.a.createElement(O,null),document.getElementById("root"))}},[[23,2,1]]]);
//# sourceMappingURL=main.04812014.chunk.js.map