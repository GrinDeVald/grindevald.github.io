{"version":3,"sources":["components/Dishes/index.js","components/Users/user.js","components/Users/userModal.js","firebase.js","components/Users/index.js","App.js","index.js"],"names":["Dishes","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","react_default","a","createElement","Component","User","showModal","setState","dishesModal","delUser","e","userId","target","dataset","id","editUserModal","userName","name","_this$props","dishes","className","onClick","data-id","data-name","components_Dishes","UserModal","changeName","value","addUser","editUser","currentUser","type","onChange","placeholder","defaultValue","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","firebaseDB","Users","getUserData","ref","on","snapshot","users","forEach","childSnapshot","push","objectSpread","key","val","modal","resetState","currentUserId","dinner","fav","user","concat","remove","newUserName","update","_this2","_this$state","map","item","i","Users_user","userModal","App","axios","get","then","res","el","document","innerHTML","data","dishTags","querySelectorAll","length","classList","contains","holder","firstChild","innerText","descr","nextElementSibling","firstElementChild","console","log","components_Users","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.04812014.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\nclass Dishes extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {  }\r\n  }\r\n  render() { \r\n\r\n    const dishes = this.props;\r\n\r\n    // console.log('dishesdishes', dishes);\r\n\r\n    return ( \r\n      <div>\r\n        {/* {dishes.map((item,i) => (\r\n          <div key={i} className=\"dishContainer\">\r\n            <div className=\"dishName\">{item.name}</div>\r\n            <div className=\"dishDescr\">{item.descr}</div>\r\n          </div>\r\n        ))} */}\r\n      </div>\r\n     );\r\n  }\r\n}\r\n \r\nexport default Dishes;","import React, { Component } from 'react';\r\n\r\nimport DishesModal from '../Dishes';\r\n\r\nclass User extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n      dishesModal: false\r\n     }\r\n  }\r\n\r\n  showModal = () => {\r\n    this.setState({\r\n      dishesModal: !this.state.dishesModal\r\n    })\r\n  }\r\n\r\n  delUser = (e) => {\r\n    const userId = e.target.dataset.id;\r\n    this.props.delUser(userId)\r\n  }\r\n\r\n  editUserModal = (e) => {\r\n    const userName = e.target.dataset.name;\r\n    const userId = e.target.dataset.id;\r\n    this.props.editUserModal(userName, userId)\r\n  }\r\n\r\n  render() { \r\n\r\n    const { dishesModal } = this.state;\r\n    const { name, userId, dishes } = this.props;\r\n\r\n    return ( \r\n      <div className=\"userContainer\">\r\n      \r\n        <div className=\"nameContainer\">\r\n          <h3>{name}</h3>\r\n          <button onClick={this.delUser} data-id={userId} className=\"delUserBtn\">&#10060;</button>\r\n          <button onClick={this.editUserModal} data-id={userId} data-name={name} className=\"editUserBtn\">✎</button>\r\n        </div>\r\n        <button onClick={this.showModal}>Выбрать обед</button>\r\n        {dishesModal &&\r\n        <DishesModal \r\n        dishes={dishes}\r\n          />\r\n        }\r\n      </div>\r\n     );\r\n  }\r\n}\r\n \r\nexport default User;","import React, { Component } from 'react';\r\n\r\nclass UserModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: ''\r\n    }\r\n  }\r\n\r\n  changeName = (e) => {\r\n    this.setState({\r\n      name: e.target.value\r\n    })\r\n  }\r\n\r\n  addUser = () => {\r\n\r\n    this.props.addUser(this.state.name);\r\n\r\n  }\r\n\r\n  editUser = (e) => {\r\n\r\n    let { name } = this.state;\r\n    const { currentUser } = this.props;\r\n\r\n    if(!name){\r\n      name = currentUser;\r\n    }\r\n    this.props.editUser(name);\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    const { showModal, currentUser } = this.props;\r\n    \r\n    return (\r\n          <div className=\"userModalContainer\">\r\n            <div className=\"userModal\">\r\n              <h3 className=\"userModalTitle\">{currentUser !== '' ? \"Изменить имя\": \"Добавить пользователя\"}</h3>\r\n              <input type=\"text\" name=\"username\" className=\"modalInput\" onChange={this.changeName} placeholder=\"Введите Имя\" defaultValue={currentUser}/>\r\n              <div className=\"modalBtnsContainer\">\r\n              {currentUser !== '' ? \r\n                <button className=\"modalBtn\" onClick={this.editUser}>Изменить</button>\r\n                :\r\n                <button className=\"modalBtn\" onClick={this.addUser}>Добавить</button>\r\n              }\r\n              <button className=\"modalBtn redBtn\" onClick={showModal}>Отмена</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserModal;\r\n","import * as firebase from 'firebase';\r\n\r\nconst config = {\r\n  apiKey: \"AIzaSyC8fQi4N3lz_6l0EmJaDtz61ivrqcI_rbA\",\r\n  authDomain: \"dinner-16b10.firebaseapp.com\",\r\n  databaseURL: \"https://dinner-16b10.firebaseio.com\",\r\n  projectId: \"dinner-16b10\",\r\n  storageBucket: \"dinner-16b10.appspot.com\",\r\n  messagingSenderId: \"97632152223\"\r\n};\r\n\r\nfirebase.initializeApp(config);\r\n\r\nconst firebaseDB = firebase.database();\r\n\r\nexport { firebaseDB };","import React, { Component } from 'react';\r\n\r\nimport User from './user';\r\nimport UserModal from './userModal';\r\nimport { firebaseDB } from '../../firebase';\r\n\r\nclass Users extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n      users: [],\r\n      modal: false,\r\n      currentUserId: '',\r\n      currentUser: ''\r\n     }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.getUserData();\r\n  }\r\n\r\n  getUserData = () => {\r\n    firebaseDB.ref('users').on('value', (snapshot) =>{\r\n      const users = [];\r\n      snapshot.forEach((childSnapshot) => {\r\n        users.push({\r\n          id: childSnapshot.key,\r\n          ...childSnapshot.val()\r\n        })\r\n      })\r\n      this.setState({\r\n        users\r\n      })\r\n    })\r\n  }\r\n\r\n  componentWillUpdate(){\r\n    \r\n  }\r\n\r\n  showModal = () => {\r\n    this.setState({\r\n      modal: !this.state.modal\r\n    })\r\n  }\r\n\r\n  resetState = () => {\r\n    this.setState({\r\n      currentUser: '',\r\n      currentUserId: '',\r\n    })\r\n  }\r\n\r\n  addUser = (name) => {\r\n    firebaseDB.ref('users').push({\r\n      name: name,\r\n      dinner:[],\r\n      fav:[]\r\n    })\r\n    this.getUserData();\r\n    this.showModal();\r\n  }\r\n\r\n  delUser = (user) => {\r\n    firebaseDB.ref(`users/${user}`).remove();\r\n    this.getUserData();\r\n  }\r\n\r\n  editUser = (newUserName) => {\r\n\r\n    const { currentUserId } = this.state;\r\n    firebaseDB.ref(`users/${currentUserId}`).update({\r\n      name: newUserName\r\n    });\r\n\r\n    this.showModal();\r\n    this.resetState();\r\n  }\r\n\r\n  editUserModal = (userName, userId) => {\r\n    this.setState({\r\n      currentUserId: userId,\r\n      currentUser: userName,\r\n      modal: !this.state.modal,\r\n    })\r\n  }\r\n\r\n  render() { \r\n\r\n    const { users, modal, currentUser } = this.state;\r\n    const { dishes } = this.props;\r\n\r\n    return ( \r\n      <div className=\"usersContainer\">\r\n        <button className=\"addUserBtn\" onClick={this.showModal}>Добавить</button>\r\n        <h3 className=\"usersTitle\">Пользователи</h3>\r\n        <div className=\"usersWrapper\">\r\n          {users.map((item,i) => {\r\n            return(\r\n            <User \r\n              key={i} \r\n              userId={item.id}\r\n              name={item.name} \r\n              delUser={this.delUser}\r\n              editUserModal={this.editUserModal}\r\n              dishes={dishes}/>\r\n            )\r\n          })}\r\n        </div>\r\n        {modal &&\r\n        <UserModal \r\n          showModal={this.showModal}\r\n          addUser={this.addUser}\r\n          currentUser={currentUser}\r\n          editUser={this.editUser}\r\n          />\r\n        }\r\n      </div>\r\n     );\r\n  }\r\n}\r\n \r\nexport default Users;","import React, { Component } from 'react';\nimport './App.css';\nimport Users from './components/Users';\n\n// import axios from 'axios';\nimport axios from 'axios-https-proxy-fix';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { \n      dishes: []\n     }\n  }\n\n  componentDidMount(){\n\n    axios.get('https://cors-anywhere.herokuapp.com/https://www.obedsmile.ru/menu/?date=14-11-2018')\n    .then(res => {\n      var el = document.createElement( 'html' );\n      el.innerHTML = res.data;\n      let dishes = [];\n      let dishTags = el.querySelectorAll('.name-dish')\n      for(let i = 0; i < dishTags.length; i += 1){\n        const wrongClass = dishTags[i].classList.contains('col-md-7');\n        if(wrongClass){\n          continue\n        }\n        const holder = {name: dishTags[i].firstChild.innerText, descr: dishTags[i].nextElementSibling.firstElementChild.innerText};\n        dishes.push(holder)\n      }\n      \n        return dishes;\n    \n    })\n    .then((dishes) => {\n      this.setState({\n        dishes\n      })\n    })\n\n    \n  }\n\n  render() {\n\n    const { dishes } = this.state;\n\n    console.log(dishes);\n\n    return (\n      <div className=\"App\">\n        { dishes.length ?\n          <Users dishes={dishes}/>\n          :\n          'PRELOADER'\n        }\n        \n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}